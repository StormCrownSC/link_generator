<!DOCTYPE html>
<html>
<head>
    <title>Link generator</title>
    <link rel="stylesheet" href="style.css" />
    <script src="main.js"></script>
</head>
<body>
<form id="shorten-form" method="post" enctype="application/x-www-form-urlencoded">
    <p>Сгененрировать короткую ссылку</p>
    <input type="text" id="url" name="url"/>
    <input type="submit" id="subshot" value="Сгенерировать"/>
</form>
<p id="resultsh"></p>
<form id="long-form" method="get" enctype="application/x-www-form-urlencoded">
    <p>Получить полную ссылку</p>
    <input type="text" id="shot_url" name="shot_url"/>
    <input type="submit" id="sublong" value="Получить"/>
</form>
<p id="resultlong"></p>

<script>
    const form = document.querySelector('#shorten-form');
    const resultsh = document.querySelector('#resultsh');

    form.addEventListener('submit', async (event) => {
        var url = document.getElementById("url").value;
        event.preventDefault();
        var request = {'url':url}
        const response = await fetch('http://localhost:11000/shorten', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(request),
        });
        const data = await response.json();
        resultsh.innerHTML = "<a href=" + url + ">" + data.Shorten + "  </a>";
        console.log(data.Shorten)
    });

    const longform = document.querySelector('#long-form');
    const resultlong = document.querySelector('#resultlong');

    longform.addEventListener('submit', async (event) => {
        var shot_url = document.getElementById("shot_url").value;
        event.preventDefault();
        const response = await fetch('http://localhost:11000/shorten?shortlink=' + shot_url, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            },
        });
        const data = await response.json();
        resultlong.innerHTML = "<a href=" + data.Link + ">" + data.Link + " </a>";
        console.log(data)
    });
</script>
</body>
</html>
